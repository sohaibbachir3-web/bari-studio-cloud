export default async function handler(req,res){ if(req.method!=='POST') return res.status(405).end(); const data=req.body; const webhook=process.env.NEXT_PUBLIC_N8N_WEBHOOK||''; if(!webhook) return res.status(500).json({error:'Webhook not configured. Set NEXT_PUBLIC_N8N_WEBHOOK.'}); try{ const r=await fetch(webhook,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}); if(r.ok) return res.status(200).json({ok:true}); const text=await r.text(); return res.status(502).json({ok:false,text}); }catch(err){ console.error(err); return res.status(500).json({error:err.message}); } }